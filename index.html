<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday Myrtle Aunty</title>

<style>
  body {
    margin: 0;
    height: 100vh;
    background: black;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Georgia, serif;
    color: white;
    overflow: hidden;
  }

  #wrapper {
    width: 80vw;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #message {
    text-align: center;
    font-size: clamp(2rem, 3.5vw, 3.1rem);
    line-height: 1.5;
    opacity: 0;
    transition: opacity 1s ease;
    white-space: normal;
    word-break: keep-all;
    overflow-wrap: normal;
    hyphens: none;
  }

  .char {
    opacity: 0;
    transition: opacity 0.8s ease;
  }

  .acronym {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.35em;
  }

  .acronym-line {
    display: grid;
    grid-template-columns: 4ch auto;
    gap: 0.6ch;
    text-align: left;
  }

  /* Ensure acronym letters align perfectly */
  .acronym-line div:first-child {
    font-family: monospace;
    text-align: right;
  }

  /* Make final message as big as possible without overflowing */
  .final {
    font-size: clamp(4rem, 10vw, 8rem);
    font-weight: bold;
  }
</style>
</head>

<body>
<div id="wrapper">
  <div id="message"></div>
</div>

<script>
const sections = [
  "Happy Birthday, Myrtle Aunty!",
  "Today we pause with deep gratitude to honor you and the life God has faithfully shaped.",
  "Your love, kindness, and gentle strength have been a light to so many, reflecting the heart of Christ in a steady and powerful way.",
  "Your presence at Cornerstone Delaware truly matters.",
  "Through your devotion, willingness to serve, and sincere love for others, you help shape this fellowship into a place of warmth, unity, and spiritual growth.",
  {
    acronym: [
      ["M —", "Mighty in faith"],
      ["Y —", "Yielded to God’s will"],
      ["R —", "Radiant with love"],
      ["T —", "Touching lives with kindness"],
      ["L —", "Loving toward all"],
      ["E —", "Encourager of hearts"]
    ]
  },
  {
    verse: [
      "Isaiah 40:31",
      "But those who hope in the Lord will renew their strength. They will soar on wings like eagles; they will run and not grow weary, they will walk and not be faint."
    ]
  },
  "We are deeply grateful for you, Myrtle Aunty, and for the many lives you have touched through your faith and care."
];

const message = document.getElementById("message");
let index = 0;

/* ---------- helpers ---------- */
function fadeOut(next) {
  message.style.opacity = 0;
  setTimeout(next, 1100);
}

function fadeInChars(chars, done, speed = 55) {
  let i = 0;
  function nextChar() {
    if (i >= chars.length) {
      setTimeout(done, 1600);
      return;
    }
    if (chars[i]) chars[i].style.opacity = 1;
    i++;
    setTimeout(nextChar, speed);
  }
  nextChar();
}

/* ---------- section renderer ---------- */
function showSection(section) {
  message.innerHTML = "";
  message.className = "";
  message.style.opacity = 0;

  // ACRONYM
  if (section.acronym) {
    message.className = "acronym";
    const chars = [];

    section.acronym.forEach(([leftText, rightText]) => {
      const row = document.createElement("div");
      row.className = "acronym-line";

      const left = document.createElement("div");
      const right = document.createElement("div");

      [...leftText].forEach(c => {
        if (c === " ") left.appendChild(document.createTextNode(" "));
        else {
          const span = document.createElement("span");
          span.className = "char";
          span.textContent = c;
          left.appendChild(span);
          chars.push(span);
        }
      });

      [...rightText].forEach(c => {
        if (c === " ") right.appendChild(document.createTextNode(" "));
        else {
          const span = document.createElement("span");
          span.className = "char";
          span.textContent = c;
          right.appendChild(span);
          chars.push(span);
        }
      });

      row.appendChild(left);
      row.appendChild(right);
      message.appendChild(row);
    });

    requestAnimationFrame(() => message.style.opacity = 1);
    fadeInChars(chars, () => fadeOut(nextSection));
    return;
  }

  // VERSE SECTION
  if (section.verse) {
    message.innerHTML = "";
    const chars = [];
    section.verse.forEach((line, lineIndex) => {
      if (lineIndex > 0) message.appendChild(document.createElement("br"));
      [...line].forEach(c => {
        if (c === " ") message.appendChild(document.createTextNode(" "));
        else {
          const span = document.createElement("span");
          span.className = "char";
          span.textContent = c;
          message.appendChild(span);
          chars.push(span);
        }
      });
    });

    requestAnimationFrame(() => message.style.opacity = 1);
    fadeInChars(chars, () => fadeOut(nextSection));
    return;
  }

  // NORMAL TEXT
  const chars = [];
  [...section].forEach(c => {
    if (c === " ") message.appendChild(document.createTextNode(" "));
    else {
      const span = document.createElement("span");
      span.className = "char";
      span.textContent = c;
      message.appendChild(span);
      chars.push(span);
    }
  });

  requestAnimationFrame(() => message.style.opacity = 1);
  fadeInChars(chars, () => fadeOut(nextSection));
}

function nextSection() {
  index++;
  if (index < sections.length) {
    showSection(sections[index]);
  } else {
    showFinal();
  }
}

/* ---------- final ---------- */
function showFinal() {
  message.innerHTML = "";
  message.className = "final";
  message.style.opacity = 0;

  const chars = [];
  [..."Happy Birthday, Myrtle Aunty!"].forEach(c => {
    if (c === " ") message.appendChild(document.createTextNode(" "));
    else {
      const span = document.createElement("span");
      span.className = "char";
      span.textContent = c;
      message.appendChild(span);
      chars.push(span);
    }
  });

  requestAnimationFrame(() => message.style.opacity = 1);
  fadeInChars(chars, () => {});
}

/* start animation */
showSection(sections[index]);
</script>
</body>
</html>
